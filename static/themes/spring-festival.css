/* Theme: 春节 - 白底中国红 + 金色点缀；立体浮雕 + 闪烁边缘 */

/* 主题变量 */
:root {
  --primary-color: #c81e1e;           /* 中国红 */
  --primary-light: #fff1f2;
  --secondary-color: #7f1d1d;         /* 深红 */
  --accent-color: #f59e0b;            /* 金色强调 */
  --background-color: #ffffff;
  --surface-color: #f8fafc;
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --border-color: #e5e7eb;
  --shadow: 0 12px 24px rgba(15, 23, 42, 0.08);
  --shadow-hover: 0 18px 36px rgba(15, 23, 42, 0.12);

  /* 发光/描边控制 */
  --holiday-bg: #f6f7fb;
  --holiday-surface: #ffffff;
  --holiday-shadow: rgba(15, 23, 42, 0.12);
  --holiday-highlight: rgba(255, 255, 255, 0.9);
  --accent-red-strong: rgba(200, 30, 30, 0.6);
  --accent-red-glow: rgba(200, 30, 30, 0.25);
  --accent-red-glow-strong: rgba(200, 30, 30, 0.42);
  --white-glow: rgba(255, 255, 255, 0.9);
  --gold-glow: rgba(245, 158, 11, 0.25);
}

/* 基础 */
body {
  background-color: var(--holiday-bg) !important;
  color: var(--text-primary) !important;
  font-family: 'Roboto', 'Microsoft YaHei', sans-serif;
}
.editor-container {
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%) !important;
  border-radius: 16px !important;
  border: 1px solid rgba(200, 30, 30, 0.1) !important;
  box-shadow: 0 20px 50px rgba(15, 23, 42, 0.10) !important;
  backdrop-filter: none !important;
}
.editor-container h1,
.editor-container h2 { color: var(--text-primary) !important; }

label, .text-gray-300, .text-gray-400 { color: var(--text-secondary) !important; }

/* 浮雕区域 */
.pattern-list, .product-list, .control-panel {
  position: relative;
  background: var(--holiday-surface) !important;
  border-radius: 14px !important;
  border: 1px solid var(--border-color) !important;
  box-shadow:
    12px 12px 24px var(--holiday-shadow),
    -10px -10px 20px var(--holiday-highlight);
  overflow: hidden;
  animation: softGlow 3.2s ease-in-out infinite;
}
.pattern-list::before, .product-list::before, .control-panel::before {
  content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 1.2px;
  background: linear-gradient(120deg,
    rgba(255,255,255,0.98),
    var(--accent-red-strong),
    rgba(245,158,11,0.55),
    rgba(255,255,255,0.98),
    var(--accent-red-strong)
  );
  background-size: 330% 330%;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
  animation: edgeShimmer 3.6s ease-in-out infinite;
}

/* 预览画布更强的红金闪烁 */
.preview-panel .canvas-container {
  position: relative;
  background: #ffffff !important;
  border-radius: 16px !important;
  border: 1px solid var(--border-color) !important;
  box-shadow:
    16px 16px 32px rgba(15, 23, 42, 0.12),
    -14px -14px 28px rgba(255, 255, 255, 0.95),
    0 0 0 1px rgba(200, 30, 30, 0.08) inset;
  animation: softGlowStrong 2.6s ease-in-out infinite;
}
.preview-panel .canvas-container::before {
  content: ""; position: absolute; inset: 0; border-radius: inherit; padding: 1.6px;
  background: linear-gradient(120deg,
    rgba(255,255,255,1),
    rgba(200,30,30,0.75),
    rgba(245,158,11,0.65),
    rgba(255,255,255,1),
    rgba(200,30,30,0.75)
  );
  background-size: 360% 360%;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
  animation: edgeShimmerStrong 2.4s linear infinite;
}

#canvasPlaceholder { color: #94a3b8 !important; }

/* 卡片 */
.pattern-item, .product-item {
  background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
  border: 1px solid var(--border-color) !important;
  border-radius: 12px; padding: 1rem; margin: 0.5rem;
  cursor: pointer; text-align: center; display: inline-block;
  transition: transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
  box-shadow: 6px 6px 12px rgba(15,23,42,0.08), -4px -4px 10px rgba(255,255,255,0.7);
}
.pattern-item:hover, .product-item:hover {
  transform: translateY(-2px);
  border-color: rgba(200,30,30,0.55) !important;
  box-shadow: 0 0 0 2px rgba(200,30,30,0.1),
              10px 10px 20px rgba(15,23,42,0.12),
              -8px -8px 16px rgba(255,255,255,0.85);
}
.pattern-item.active, .product-item.active, .pattern-item.selected, .product-item.selected {
  border-color: var(--primary-color) !important;
  background: var(--primary-light);
  box-shadow:
    0 0 0 2px var(--accent-red-glow),
    0 0 18px var(--accent-red-glow-strong),
    0 0 16px var(--gold-glow),
    10px 10px 20px rgba(15, 23, 42, 0.12),
    -8px -8px 16px rgba(255, 255, 255, 0.9);
}
.pattern-item img, .product-item img {
  max-width: 100px; max-height: 100px; border-radius: 8px;
  filter: drop-shadow(0 6px 10px rgba(15,23,42,0.18));
}

/* 选择器/输入 */
.category-select, .theme-select, .blend-mode-select {
  background: #ffffff !important; border: 1px solid var(--border-color) !important;
  color: var(--text-primary) !important; border-radius: 10px !important;
  padding: 0.5rem 0.75rem;
  box-shadow: 3px 3px 8px rgba(15,23,42,0.06), -3px -3px 8px rgba(255,255,255,0.7);
  transition: box-shadow 0.2s ease, border-color 0.2s ease; appearance: none;
}
.category-select:hover, .theme-select:hover, .blend-mode-select:hover { border-color: rgba(200,30,30,0.4) !important; }
.category-select:focus, .theme-select:focus, .blend-mode-select:focus {
  outline: none !important; border-color: var(--primary-color) !important;
  box-shadow: 0 0 0 3px rgba(200,30,30,0.18), var(--shadow);
}

/* 滑块 */
.slider-thumb::-webkit-slider-runnable-track {
  height: 6px; background: linear-gradient(90deg, #f1f5f9, #ffffff);
  border-radius: 999px; border: 1px solid var(--border-color);
  box-shadow: inset 2px 2px 4px rgba(15,23,42,0.06), inset -2px -2px 4px rgba(255,255,255,0.8);
}
.slider-thumb::-webkit-slider-thumb {
  -webkit-appearance: none; width: 20px; height: 20px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff, #fecaca 60%, #c81e1e 100%);
  border: 2px solid #ffffff; cursor: pointer;
  box-shadow: 0 0 0 3px rgba(200,30,30,0.14), 0 6px 12px rgba(15,23,42,0.18);
  margin-top: -8px;
}
.slider-thumb::-moz-range-track { height: 6px; background: linear-gradient(90deg, #f1f5f9, #ffffff); border-radius: 999px; border: 1px solid var(--border-color); box-shadow: inset 2px 2px 4px rgba(15,23,42,0.06), inset -2px -2px 4px rgba(255,255,255,0.8); }
.slider-thumb::-moz-range-thumb {
  width: 20px; height: 20px; border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #fff, #fecaca 60%, #c81e1e 100%);
  border: 2px solid #ffffff; box-shadow: 0 0 0 3px rgba(200,30,30,0.14), 0 6px 12px rgba(15,23,42,0.18);
}

/* 按钮 */
.btn, .btn-gradient, #exportBtn {
  background: linear-gradient(90deg, #c81e1e 0%, #991b1b 100%) !important;
  color: #fff !important; border: 1px solid rgba(200,30,30,0.25) !important;
  border-radius: 10px !important;
  box-shadow: 0 10px 20px rgba(200,30,30,0.25), inset 0 -2px 0 rgba(0,0,0,0.08);
  transition: transform 0.15s ease, box-shadow 0.2s ease, filter 0.15s ease;
}
.btn:hover, .btn-gradient:hover, #exportBtn:hover {
  transform: translateY(-2px); filter: brightness(1.03);
  box-shadow: 0 14px 28px rgba(200,30,30,0.3), inset 0 -2px 0 rgba(0,0,0,0.1);
}
#resetBtn {
  background: linear-gradient(180deg, #ffffff, #f8fafc) !important;
  color: var(--text-primary) !important; border: 1px solid var(--border-color) !important; border-radius: 10px !important;
  box-shadow: 6px 6px 12px rgba(15,23,42,0.06), -6px -6px 12px rgba(255,255,255,0.8);
}
#resetBtn:hover {
  border-color: rgba(200,30,30,0.35) !important;
  box-shadow: 10px 10px 18px rgba(15,23,42,0.08), -10px -10px 18px rgba(255,255,255,0.9);
}

/* 标题下划线：红->金 渐变 */
.pattern-panel h2, .preview-panel h2, .product-panel h2, .control-panel h2 { position: relative; padding-bottom: 6px; }
.pattern-panel h2::after, .preview-panel h2::after, .product-panel h2::after, .control-panel h2::after {
  content: ""; position: absolute; left: 0; bottom: 0; height: 3px; width: 42px; border-radius: 999px;
  background: linear-gradient(90deg, #c81e1e, #f59e0b);
  box-shadow: 0 0 10px rgba(200,30,30,0.35), 0 0 8px rgba(245,158,11,0.28);
}

/* 响应式 */
@media (max-width: 768px) {
  .pattern-item img, .product-item img { max-width: 80px; max-height: 80px; }
}

/* 动画 */
@keyframes softGlow {
  0% { box-shadow: 12px 12px 24px var(--holiday-shadow), -10px -10px 20px var(--holiday-highlight), 0 0 0 0 rgba(200,30,30,0); }
  50%{ box-shadow: 12px 12px 24px var(--holiday-shadow), -10px -10px 20px var(--holiday-highlight), 0 0 14px var(--accent-red-glow); }
  100%{box-shadow: 12px 12px 24px var(--holiday-shadow), -10px -10px 20px var(--holiday-highlight), 0 0 0 0 rgba(200,30,30,0); }
}
@keyframes softGlowStrong {
  0% { box-shadow: 16px 16px 32px rgba(15,23,42,0.12), -14px -14px 28px rgba(255,255,255,0.95), 0 0 0 0 rgba(200,30,30,0); }
  50%{ box-shadow: 16px 16px 32px rgba(15,23,42,0.12), -14px -14px 28px rgba(255,255,255,0.95), 0 0 20px var(--accent-red-glow-strong); }
  100%{box-shadow: 16px 16px 32px rgba(15,23,42,0.12), -14px -14px 28px rgba(255,255,255,0.95), 0 0 0 0 rgba(200,30,30,0); }
}
@keyframes edgeShimmer { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
@keyframes edgeShimmerStrong { 0%{background-position:0% 50%;filter:brightness(1)} 50%{background-position:100% 50%;filter:brightness(1.2)} 100%{background-position:0% 50%;filter:brightness(1)} }

/* 通用保留 */
.toolbar { background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 1rem; box-shadow: var(--shadow); }
.toolbar h1 { margin: 0; font-size: 1.5rem; font-weight: 500; }
.main-content { background-color: var(--surface-color); min-height: calc(100vh - 80px); padding: 2rem; }

.export-btn { background: var(--accent-color); color:#fff; padding:1rem 2rem; border:none; border-radius:10px; font-size:1rem; font-weight:600; cursor:pointer; transition: all .3s ease; box-shadow: var(--shadow); }
.export-btn:hover { background:#d97706; box-shadow: var(--shadow-hover); transform: translateY(-2px); }

.loading { display:inline-block; width:20px; height:20px; border:3px solid var(--border-color); border-radius:50%; border-top-color: var(--primary-color); animation: spin 1s ease-in-out infinite; }
@keyframes spin { to{ transform: rotate(360deg);} }
.toast { position:fixed; top:20px; right:20px; background: var(--primary-color); color:#fff; padding:1rem 1.5rem; border-radius:6px; box-shadow: var(--shadow-hover); z-index:1000; animation: slideIn .3s ease; }
@keyframes slideIn { from{ transform: translateX(100%); opacity:0;} to{ transform: translateX(0); opacity:1;} }

/* 列表发光迁移到包裹层：.pattern-list-wrap/.product-list-wrap */
.pattern-list::before, .product-list::before { content: none !important; }

.pattern-list, .product-list {
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  animation: none !important;
  overflow-y: auto !important;  /* 保持内部滚动（max-height 由模板控制） */
  overflow-x: hidden;
}

/* 包裹层：仅围住列表区域的浮雕与发光边缘 */
.pattern-list-wrap, .product-list-wrap {
  position: relative;
  background: var(--holiday-surface) !important;
  border-radius: 14px !important;
  border: 1px solid var(--border-color) !important;
  box-shadow:
    12px 12px 24px var(--holiday-shadow),
    -10px -10px 20px var(--holiday-highlight);
  overflow: visible;
  margin-top: 0.5rem;
}
.pattern-list-wrap::before, .product-list-wrap::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1.2px;
  background: linear-gradient(120deg,
    rgba(255,255,255,0.98),
    var(--accent-red-strong),
    rgba(245,158,11,0.55),
    rgba(255,255,255,0.98),
    var(--accent-red-strong)
  );
  background-size: 330% 330%;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
  animation: edgeShimmer 3.6s ease-in-out infinite;
}

/* 归档登记按钮 - 春节主题：中国红金双色闪烁 */
#archiveBtn {
  position: relative;
  background: linear-gradient(135deg, #c81e1e 0%, #f59e0b 50%, #c81e1e 100%) !important;
  color: #fff !important;
  border: 2px solid rgba(200, 30, 30, 0.6) !important;
  border-radius: 12px !important;
  padding: 0.75rem 1.5rem !important;
  font-weight: 600 !important;
  font-size: 1rem !important;
  box-shadow:
    0 0 30px rgba(200, 30, 30, 0.5),
    0 0 20px rgba(245, 158, 11, 0.4),
    0 8px 16px rgba(200, 30, 30, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  animation: springFestivalArchiveButtonPulse 1.5s ease-in-out infinite;
  transition: all 0.2s ease;
  overflow: hidden;
}

#archiveBtn::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 2px;
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.9),
    rgba(200, 30, 30, 0.9),
    rgba(245, 158, 11, 0.9),
    rgba(200, 30, 30, 0.9),
    rgba(255, 255, 255, 0.9)
  );
  background-size: 280% 280%;
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
          mask-composite: exclude;
  pointer-events: none;
  animation: springFestivalArchiveButtonBorder 2s linear infinite;
}

#archiveBtn:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow:
    0 0 40px rgba(200, 30, 30, 0.7),
    0 0 30px rgba(245, 158, 11, 0.6),
    0 12px 24px rgba(200, 30, 30, 0.4),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
  animation-duration: 1s;
}

/* 春节归档按钮动画 */
@keyframes springFestivalArchiveButtonPulse {
  0% {
    box-shadow:
      0 0 30px rgba(200, 30, 30, 0.5),
      0 0 20px rgba(245, 158, 11, 0.4),
      0 8px 16px rgba(200, 30, 30, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
  50% {
    box-shadow:
      0 0 40px rgba(200, 30, 30, 0.8),
      0 0 30px rgba(245, 158, 11, 0.7),
      0 12px 20px rgba(200, 30, 30, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.3);
  }
  100% {
    box-shadow:
      0 0 30px rgba(200, 30, 30, 0.5),
      0 0 20px rgba(245, 158, 11, 0.4),
      0 8px 16px rgba(200, 30, 30, 0.3),
      inset 0 1px 0 rgba(255, 255, 255, 0.2);
  }
}

@keyframes springFestivalArchiveButtonBorder {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
